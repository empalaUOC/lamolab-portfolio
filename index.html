<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAMOLAB | Industrial Strategy & Design</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>

    <style>
        /* --- VARIABLES INDUSTRIALES --- */
        :root {
            --bg-color: #E8E6E1;
            --ink-color: #111111;
            --tech-blue: #0044CC;
            --pack-brown: #4A3B32;
            --font-main: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            --spacing-unit: clamp(1rem, 2vw, 4rem);
        }

        /* --- RESET & BASE --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            background-color: var(--bg-color);
            color: var(--ink-color);
            font-family: var(--font-main);
            overflow-x: hidden; /* Evita scroll horizontal nativo */
            width: 100%;
            cursor: none; /* Ocultamos cursor nativo para usar p5.js */
        }

        /* --- TYPOGRAPHY --- */
        h1.giant-type {
            font-size: clamp(6rem, 22vw, 30rem);
            line-height: 0.8;
            letter-spacing: -0.04em;
            text-transform: uppercase;
            font-weight: 700;
            white-space: nowrap;
            margin-left: -0.5vw; /* Optical alignment */
        }

        h2 {
            font-size: clamp(2rem, 5vw, 6rem);
            text-transform: uppercase;
            border-bottom: 2px solid var(--ink-color);
            padding-bottom: 1rem;
            margin-bottom: 2rem;
        }

        /* --- LAYOUT: FULL WIDTH --- */
        section {
            width: 100%;
            padding: var(--spacing-unit);
            border-bottom: 1px solid var(--ink-color);
        }

        /* --- HERO SECTION --- */
        #hero {
            height: 90vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding-bottom: 0;
        }
        
        .meta-data {
            display: flex;
            justify-content: space-between;
            font-family: monospace;
            font-size: 0.9rem;
            border-top: 1px solid var(--ink-color);
            padding-top: 10px;
            margin-bottom: 2vh;
        }

        /* --- PORTFOLIO (DRAG & SCROLL) --- */
        #portfolio {
            position: relative;
            overflow: hidden; /* Ocultamos la barra, usamos JS */
            padding: 0;
        }

        .portfolio-header {
            padding: var(--spacing-unit);
            position: sticky;
            left: 0;
        }

        .gallery-track {
            display: flex;
            gap: 0; /* Sin espacios, pegados como bloques industriales */
            cursor: none; 
            padding-left: var(--spacing-unit);
            padding-right: var(--spacing-unit);
            user-select: none;
            width: max-content; /* Permite que crezca horizontalmente */
            transition: transform 0.1s ease-out; /* Suavizado básico */
        }

        .project-card {
            width: 40vw; /* Ancho relativo al viewport */
            min-width: 400px;
            height: 60vh;
            border-right: 1px solid var(--ink-color);
            position: relative;
            flex-shrink: 0;
            overflow: hidden;
            group: project-hover;
        }

        .project-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: grayscale(100%);
            transition: filter 0.3s ease;
        }

        .project-card:hover img {
            filter: grayscale(0%);
        }

        .project-info {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: var(--tech-blue);
            color: white;
            padding: 5px 10px;
            font-family: monospace;
            text-transform: uppercase;
        }

        /* --- FOOTER --- */
        #footer {
            height: 50vh;
            background-color: var(--ink-color); /* Footer oscuro */
            color: var(--bg-color);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- MODAL (POP-UP) --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(232, 230, 225, 0.95);
            z-index: 1000;
            display: none; /* Oculto por defecto */
            opacity: 0;
            transition: opacity 0.3s ease;
            overflow-y: auto;
        }

        .modal-overlay.active {
            display: block;
            opacity: 1;
        }

        .modal-content {
            width: 100%;
            max-width: 900px; /* Aquí sí limitamos para lectura, pero full en móvil */
            margin: 0 auto;
            padding: 4rem 2rem;
        }

        .modal-close {
            position: fixed;
            top: 2rem;
            right: 2rem;
            font-size: 2rem;
            cursor: pointer;
            z-index: 1001;
            color: var(--tech-blue);
            font-family: monospace;
        }

        .modal-gallery img {
            width: 100%;
            height: auto;
            margin-bottom: 1rem;
            display: block;
            border: 1px solid var(--ink-color);
        }

        .modal-text {
            font-size: 1.5rem;
            line-height: 1.4;
            margin-bottom: 3rem;
            max-width: 80%;
            font-family: 'Helvetica Neue', sans-serif;
        }

        /* --- CANVAS P5 --- */
        #p5-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9999;
            pointer-events: none; /* Click through */
        }

    </style>
</head>
<body>

    <section id="hero">
        <div class="meta-data">
            <span>REF: LAMOLAB_V1.0</span>
            <span>STRATEGY & DESIGN</span>
            <span>ZARAGOZA, ES</span>
        </div>
        <h1 class="giant-type">Lamo<br>Lab.</h1>
    </section>

    <section id="portfolio">
        <div class="portfolio-header">
            <h2>01. Index / Proyectos</h2>
        </div>
        
        <div class="gallery-track" id="track">
            
            <div class="project-card" onclick="openModal('zaha')">
                <div class="project-info">001 // Zaha Hadid</div>
                <img src="https://via.placeholder.com/600x800/333/fff?text=ZAHA+HADID" alt="Zaha Hadid Cover">
            </div>

            <div class="project-card" onclick="openModal('puentes')">
                <div class="project-info">002 // Puentes ZGZ</div>
                <img src="https://via.placeholder.com/600x800/555/fff?text=PUENTES+ZGZ" alt="Puentes Cover">
            </div>

            <div class="project-card" onclick="openModal('protefauna')">
                <div class="project-info">003 // Protefauna</div>
                <img src="https://via.placeholder.com/600x800/777/fff?text=PROTEFAUNA" alt="Protefauna Cover">
            </div>

            <div style="width: 20vw;"></div>
        </div>
    </section>

    <footer id="footer">
        <div style="text-align: center;">
            <h2 style="border: none; color: var(--bg-color);">Contacto</h2>
            <p style="font-family: monospace;">INFO@LAMOLAB.COM</p>
        </div>
    </footer>

    <div class="modal-overlay" id="modal">
        <div class="modal-close" onclick="closeModal()">[X] CERRAR FICHA</div>
        <div class="modal-content" id="modal-dynamic-content">
            </div>
    </div>

    <script>
        // --- DATA BASE (JSON) ---
        const projects = {
            'zaha': {
                title: "Zaha Hadid Editorial",
                text: "El encargo era diseñar el interior de una publicación editorial sobre Zaha Hadid. La solución fue una retícula modular de 6x8 y tipografía Playfair/Roboto, buscando reflejar la deconstrucción arquitectónica en el papel.",
                images: [
                    'https://via.placeholder.com/1200x800/ccc/333?text=ZAHA+1', // zaha1.jpg
                    'https://via.placeholder.com/1200x800/ccc/333?text=ZAHA+2', // zaha2.jpg
                    'https://via.placeholder.com/1200x800/ccc/333?text=ZAHA+3'  // zaha3.jpg
                ]
            },
            'puentes': {
                title: "Puentes de Zaragoza",
                text: "El encargo era crear un relato fotográfico de los puentes de la ciudad. La solución explora la luz cálida del atardecer y contrastes estructurales, enfocándose en la materialidad del hormigón y el acero.",
                images: [
                    'https://via.placeholder.com/1200x800/ccc/333?text=PUENTES+1', // puentes1.jpg
                    'https://via.placeholder.com/1200x800/ccc/333?text=PUENTES+2', // puentes2.jpg
                    'https://via.placeholder.com/1200x800/ccc/333?text=PUENTES+3'  // puentes3.jpg
                ]
            },
            'protefauna': {
                title: "Protefauna Identidad",
                text: "El encargo era diseñar Newsletter y Landing Page para Protefauna. La solución es un sistema visual claro, retícula de 8 columnas y colores corporativos que transmiten seriedad y compromiso ecológico.",
                images: [
                    'https://via.placeholder.com/1200x800/ccc/333?text=PROTEFAUNA+1', // protefauna1.jpg
                    'https://via.placeholder.com/1200x800/ccc/333?text=PROTEFAUNA+2', // protefauna2.jpg
                    'https://via.placeholder.com/1200x800/ccc/333?text=PROTEFAUNA+3'  // protefauna3.jpg
                ]
            }
        };

        // --- DRAG SCROLL LOGIC ---
        const slider = document.querySelector('#portfolio');
        const track = document.querySelector('#track');
        let isDown = false;
        let startX;
        let scrollLeft;

        slider.addEventListener('mousedown', (e) => {
            isDown = true;
            slider.classList.add('active');
            startX = e.pageX - slider.offsetLeft;
            scrollLeft = slider.scrollLeft;
        });
        slider.addEventListener('mouseleave', () => { isDown = false; });
        slider.addEventListener('mouseup', () => { isDown = false; });
        slider.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - slider.offsetLeft;
            const walk = (x - startX) * 2; // Velocidad del scroll
            slider.scrollLeft = scrollLeft - walk;
        });

        // --- MODAL LOGIC ---
        function openModal(projectId) {
            const data = projects[projectId];
            const modal = document.getElementById('modal');
            const container = document.getElementById('modal-dynamic-content');
            
            // Generar HTML
            let imagesHTML = data.images.map(img => `<img src="${img}" alt="Project Image">`).join('');
            
            container.innerHTML = `
                <h2 style="font-size: clamp(2rem, 5vw, 4rem);">${data.title}</h2>
                <p class="modal-text">${data.text}</p>
                <div class="modal-gallery">${imagesHTML}</div>
            `;
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Bloquear scroll body
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
            document.body.style.overflow = 'auto'; // Restaurar scroll
        }

        // --- P5.JS CUSTOM CURSOR ---
        function setup() {
            let canvas = createCanvas(windowWidth, windowHeight);
            canvas.id('p5-canvas');
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }

        function draw() {
            clear();
            
            // Lógica de color según posición (Footer vs Resto)
            // Calculamos posición relativa al footer
            let footer = document.getElementById('footer');
            let footerY = footer.getBoundingClientRect().top;
            
            let cursorColor;
            
            // Si el mouse está visualmente sobre el área del footer
            if (mouseY > footerY) {
                cursorColor = color(232, 230, 225); // Beige
            } else {
                cursorColor = color(0, 68, 204); // Azul Técnico
            }

            fill(cursorColor);
            noStroke();
            ellipse(mouseX, mouseY, 30, 30); // Círculo de 30px
        }
    </script>
</body>
</html>